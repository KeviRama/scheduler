<div id='file-selector-dialog'
     title='Attach file'
     style='display:none;'
     data-user-id='<%= current_user ? current_user.id : 0 %>'>
   <div class='row collapse'>
     <form>
      <fieldset>
        <h5>File to attach</h5>
        <div class='small-9 columns'>
          <label for='fsd-textoflink'>File description</label>
          <input type='text'
                 name='fsd-textoflink'
                 id='fsd-textoflink'
                 placeholder='optional'
                 title='If given, this text will appear in place of the filename as part of your note.'/>
        </div>
        <div class='small-2 columns'>
          <label>Thumbnail</label>
          <span id='fsd-thumbnail-preview'></span>
        </div>
        <div class='small-1 columns'>
          <label>Use</label>
          <input type='checkbox'
                 name='fsd-use-thumbnail'
                 id='fsd-use-thumbnail'
                 title='Should this thumbnail be used as part of the file link?' />
        </div>
        <div class='small-6 columns'>
          <label for='fsd-url'>URL</label>
          <input type='text'
                 name='fsd-url'
                 id='fsd-url'
                 placeholder='URL of file to link'
                 title='The URL of a file which can be freely downloaded. It may be hosted either within Scheduler or elsewhere.'/>
        </div>
        <div class='small-6 columns'>
          <label for='fsd-filename'>File name</label>
          <input type='text'
                 name='fsd-filename'
                 id='fsd-filename'
                 title='The name of the file.  This will be used as the text of the link if no other text is given above.'/>
        </div>
      </fieldset>
    </form>
  </div>
  <div class='row collapse'>
    <div id='fsd-listing'>
      <h5>Your files within Scheduler</h5>
      <p><span class='tinytext'>Click on a file below to auto-fill the fields above.</span></p>
      <div id='fsd-filelist'>
      </div>
    </div>
  </div>
  <div class='row collapse' id='file-upload-area'>
    <h5>File upload</h5>
    <div class='small-12 columns'>
      <div class='row collapse' id='for-upload-dialogue'>
      </div>
    </div>
  </div>
</div>

<script type='text/template' id='file-upload-dialogue'>
<form enctype='multipart/form-data'
      action='/users/<%%= user_id %>/user_files/upload'
      accept-charset='UTF-8'
      method='post'
      data-remote='true'
      id='upload-dialogue-form'>
  <input name='utf8' type='hidden' value='âœ“'>
  <input type='hidden' name='authenticity_token' value='<%= form_authenticity_token %>'>
  <div class='small-8 columns'>
    <input type='file' name='file_info' id='file_info'>
  </div>
  <div class='small-4 columns'>
    <input type='submit'
           name='commit'
           value='Upload'
           data-disable-with='Uploading...'
           class='zfbutton teensy radius'>
  </div>
</form>
</script>

<script type='text/template' id='file-upload-file'>
<div class='fsd-file' title='<%%= original_file_name %>' data-nanoid='<%%= nanoid %>'>
  <img src='<%%= thumbnail_path %>'/>
  <%%= short_name %>
</div>
</script>


