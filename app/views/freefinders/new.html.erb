<h1>Finding free resources</h1>

<%= form_for(@freefinder) do |f| %>
  <% if @freefinder.errors.any? %>
    <div id="error_explanation">
      <ul>
        <% @freefinder.errors.full_messages.each do |message| %>
          <li><%= message %></li>
        <% end %>
      </ul>
    </div>
  <% end %>
  <div class="row collapse">
    <div class="small-3 columns">
      <%= f.label "From group", class: "right inline" %>
    </div>
    <div class="small-4 columns">
      <%= f.autocomplete_field :element_name,
                               autocomplete_group_element_name_elements_path,
                               :id_element => '#freefinder_element_id',
                               :placeholder => "Group name",
                               "data-auto-focus" => true %>
      <%= f.text_field :element_id, :type => :hidden %>
    </div>
    <div class="small-5 columns">
    </div>
  </div>
  <div class="row collapse">
    <div class="small-3 columns">
      <%= f.label "Find free resources on", class: "right inline" %>
    </div>
    <div class="small-2 columns">
      <%= f.text_field :on, :id => :freedatepicker %>
    </div>
    <div class="small-1 columns">
      <%= f.label "between", class: "right inline" %>
    </div>
    <div class="small-1 columns">
      <%= f.text_field :start_time_text,
                       :placeholder => "HH:MM",
                       :length => 5 %>
    </div>
    <div class="small-1 columns">
      <%= f.label "and", class: "right inline" %>
    </div>
    <div class="small-1 columns">
      <%= f.text_field :end_time_text,
                       :placeholder => "HH:MM",
                       :length => 5 %>
    </div>
    <div class="small-3 columns">
    </div>
  </div>
  <div class="row collapse">
    <div class="small-3 columns">
      <%= f.label "Period", class: "right inline" %>
    </div>
<% 1.upto(8) do |index| %>
    <div class="small-1 columns">
      <span class="button tiny radius period-selector" data-period-no="<%= index %>"><%= index %></span>
    </div>
<% end %>
    <div class="small-1 columns">
    </div>
  </div>
  <div class="row collapse">
    <div class="small-3 columns">
      &nbsp;
    </div>
    <div class="small-2 columns">
      <%= f.submit "Find free", :class => "button small radius" %>
    </div>
<% if @freefinder.done_search %>
    <div class="small-2 columns">
      <%= f.submit "Export",
                   :name => :export,
                   :class => "button small radius" %>
    </div>
    <div class="small-2 columns">
      <%= f.submit "Create group",
                   :name => :create,
                   :class => "button small radius" %>
    </div>
    <div class="small-3 columns">
    </div>
<% else %>
    <div class="small-7 columns">
    </div>
<% end %>
  </div>

<% end %>

<div class="row collapse">
  <div class="small-3 columns">
    &nbsp;
  </div>
  <div class="small-6 columns">
<% if @freefinder.free_elements && @freefinder.free_elements.size > 0 %>
<table class="zftable">
  <tr>
    <th colspan="3"><%= @freefinder.free_elements.size %> resources found.</th>
  </tr>
<%= render @freefinder.free_elements.sort %>
</table>
<% elsif @freefinder.done_search %>
None found.
<% end %>
  </div>
  <div class="small-3 columns">
    &nbsp;
  </div>
</div>
