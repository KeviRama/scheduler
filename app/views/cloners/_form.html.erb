<h2>Cloning event</h2>
<div id="event-cloning-upper">
  <div id="for_errors">
    <% if @event_cloner.errors.any? %>
      <%= render partial: "error_msgs", object: @event_cloner.errors %>
    <% end %>
  </div>

  <div class="row collapse">
    <div class="small-12 columns">
      <p>Event:
      "<%= @event_cloner.event.body %>",
      starting
      <%= @event_cloner.event.starts_at_text %>,
      for
      <%= @event_cloner.event.duration_text %></p>
    </div>
    <hr/>
<%= form_for(@event_cloner, remote: @minimal) do |f| %>
    <div class='small-4 columns'>
      <label>Date to which to clone</label>
    </div>
    <div class='small-7 columns'>
      <label>Description</label>
    </div>
    <div class='small-1 columns'>
      &nbsp;
    </div>
    <div class='small-4 columns'>
      <%= f.text_field :original_date, readonly: true %>
    </div>
    <div class='small-7 columns'>
      <%= f.text_field :original_description, readonly: true %>
    </div>
    <div class='small-1 columns'>
      <%= f.text_field :num_instances, readonly: true %>
    </div>
    <% @event_cloner.instances.each do |instance| %>
      <%-# You have to give a string name or index will be ignored.  Bug? -%>
      <%= fields_for "event_cloner_event_instance", instance, index: instance.index do |instance_form| %>
        <div class='small-4 columns'>
          <%= instance_form.text_field :date, class: 'datepicker' %>
        </div>
        <div class='small-7 columns'>
          <%= instance_form.text_field :body %>
        </div>
        <div class='small-1 columns'>
          <img src='images/remove16.png' title='Remove this date' />
        </div>
      <% end %>
    <% end %>
    <div class='small-1 small-offset-11 columns'>
      <div style='height: 32px;'>
        <img src='images/add16.png' title='Add another date' />
      </div>
    </div>
    <hr/>
    <div class="small-12 columns">
      <%= f.submit "Create clones", class: "zfbutton tiny radius" %>
      <%= link_to "Cancel", canceledit_event_path(@event), :remote => true, :class => "zfbutton tiny radius button-link" %>
    </div>
<% end %>
  </div>
</div>

<script type="text/template" id="clone-date-template">
<div class='row'>
  <div class='small-12 columns'>
  <%%= dateish %>
    
  </div>
</div>
</script>
