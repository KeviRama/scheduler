Content-Type: text/x-zim-wiki
Wiki-Format: zim 0.4
Creation-Date: 2014-06-13T08:35:19+01:00

====== Friday 13 Jun 2014 ======

Let's see if we can parse and load the cover information.

Interesting.  Invigilations seem to appear as cover for Abeda Choudhury and have no corresponding timetable_ident.  It should still be possible to work out where they go though.  Do they explicitly reference Abeda, or is it happening by default?  Yes, they do explicitly reference her user ident - 2.  This is interesting, because there's an obvious dummy entry with an ident of 1.  Perhaps they meant to use that.

Anyway, I think I can identify them more objectively by noting the fact that the timetable_ident is missing.

Interesting problem.  Sue Wigmore's set is showing her teaching 1P En at the same time as other pupils, and there is no 1P En this year.  Is there perhaps going to be a 1P En next year?  It's not in my archive groups.csv file, but it is in the current one.  When was it created in my database?  Yesterday afternoon - 2014-06-12 14:53:29.

It should really be attached to next year and not this one, but how can I tell from SB's files?  I am selecting only a couple of columns, but there are a lot more in SB's table.  Is there an AcYearIdent field?  No - that would be too simple and sensible.  There is a YearIdent, but what does it link to?  The year group - in this case the first year.

Let's try a few likely fields.  There are:

CurrIdent
GroupStartDate
GroupEndDate
GroupCurrent

Got it - CurrIdent links the Group record to a Curriculum record, and that in turn tells you the academic year.  Need to add CurrIdent to my Groups export.

I should also be checking AcYearIdent when loading my timetable records.

Added all that stuff - now what to do about the teaching groups which have snuck into my database and shouldn't be there.  Currently my loading code doesn't delete teaching groups, on the grounds that I don't want old ones taken out of my system.  What it could usefully do in general is mark them as no longer active.  However that still wouldn't work for my current problem.  I want them actually deleted from my database.  I think I'm going to have to purge and start again.  Ah, well.  Test at home first.
