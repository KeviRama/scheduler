Content-Type: text/x-zim-wiki
Wiki-Format: zim 0.4
Creation-Date: 2014-04-28T13:25:37+01:00

====== Monday 28 Apr 2014 ======

About to make a start on laying down some actual code.  I intend to use:

Zurb Foundation for the layout
Jquery and Jquery-UI for the support
Full Calendar 2.0 for the calendar
MomentJS to handle dates.

I will pull the code for handling groups from Xronos.  To start with, I could create a scaffold for some model item, just to give me something visual to play with.  Later I would like to have pull-down dialogues for amending things, all appearing on top of my central calendar view.

I seem already to have added foundation-rails to my Gemfile.  Let's take another look at the RailsCast for Foundation and see if I can make up the means to create and edit Eras.  Fairly simple item which simply has a name, a start date and an end date.  Note that the convention of making end dates exclusive seems to be becoming generally accepted.  The Railscast is no. 417 (currently the last one he's done - he seems not to be doing them at present) and covers Foundation 4 instead of 5.  There are already some differences in how to incorporate it.  See [[:Plugins:Foundation]] for details of how to install.  I seem to have done those steps already.

Then create some scaffolding with

'''
rails g scaffold era name starts_on:date ends_on:date --skip-stylesheets
rake db:migrate
'''

OK - worked through the RailsCast and got my basic layout looking quite nice.  It occurs to me to avoid all the pop-downs for now - have simple navigation from the title bar, with the ability to click on the main title to go back to the calendar view.  I can give myself access to underyling models, but hide those options from normal users.  How can I get a pull-down menu in Zurb Foundation?

Been struggling with it, because although the menu seems fundamentally to work, the dropdown wouldn't.  However I've just found a page in the Foundation 5 documentation:

http://foundation.zurb.com/docs/components/dropdown.html

which says that the way dropdowns happen has fundamentally changed in Foundation 5, meaning their current documentation is wrong.  It tells you how to do it the F4 way.  Read on.

Yes, that gets it working, although the formatting is a little odd.  Doubtless can be fixed though.

Now I have a dialogue box, I'd like a main screen to come back to.  This should contain the calendar.  Can I get an empty calendar there to start with?  fullcalendar2-rails sounds like a likely Gem to install.

Found some instructions at:

https://github.com/richeyrobert/fullcalendar2-rails

but they don't seem quite to work.  The gems (moment and fullcalendar2) get installed, but they can't be found in the application's asset pipeline.  I need to understand more about how this works.  Reading up on it in the Rails documentation.

Stunningly simple - I hadn't restarted my server process.  Editing the source code on the fly is fine, but if you re-install your assets then you need to restart the server.  I knew that really.  Now, can I create an initial page - index.html - which contains a calendar.

I need some sort of controller to provide this.  Currently I have a static page called calendar.html, then a controller to provide the data.  The controller in markbook is called CalendarController.  However, the calendar page in markbook looks totally different from the rest of the application, which is why I used a separate html file for it.  For this application it is central, so it would be nice to use a view to generate it.  However, we will have just a controller and a view - no model.

What to call them?  I think I'd like a ScheduleController and a Schedule view.

If you generate a scaffold, rails creates a singular model, but plural controller and view.  If I do it myself though I don't think there's the same constraint.  If I create a controller, I think I can specify actions and get view created at the same time.

Try:

rails generate controller schedule show

That seems to work, and now I can get to the schedule page.  Update the template to make the links work right.
