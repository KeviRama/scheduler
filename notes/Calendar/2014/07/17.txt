Content-Type: text/x-zim-wiki
Wiki-Format: zim 0.4
Creation-Date: 2014-07-17T06:32:45+01:00

====== Thursday 17 Jul 2014 ======

Had a revelation last night, and now I know where the meetings are stored in SB.  Today I will load meetings into my d/b as well, after which I should have a full set of SB scheduling info (until I realise there's something else).

One new student was added over night - Man Tung Chow - but so far he doesn't seem to be in any groups.  Not even a tutor group.

Did a quick frig to load meetings and the like, with immediate success although the code isn't complete.  In particular, I think it will re-load said meetings each time it is run.  I think the next thing is to re-factor the timetable loading code, bringing compound events back into play and using the resource checking algorithm which I developed for the other half events.  Check the source back in first though.  It would be good to make the functionality more modular - put methods into the object itself.

Initially merging will be used solely for meetings - which will merge if they are at the same time and have the same name.

This is an opportunity to fix a problem identified yesterday.  The code for loading a timetable event will adjust its time if it's already there, but will do nothing currently about its resources.  Fix that using the algorithm developed yesterday for other half stuff.

How does the existing load go?  I read in all the data, then sort the timetable entries by period.  They go in nested hashes, indexed first by week letter and then by day name.  For each of these there is an array of relevant timetable entries, in no particular order.

Then in the timetable loading code we work sequentially through a range of dates.  For each day we work out the week letter and the day name, and thus access an array of lessons (and now meetings) for that day.  We then work sequentially through them, making sure what's in the d/b is the same as we have received from SB.

Have a tentative merge happening.  Number of events goes down from 4407 to 4237.

And successfully loaded all the meetings (eventually).

Two further things to ponder:

[ ] What are the other entries for me which aren't maths meetings
[ ] Can I do a merge on anything other than meetings?  Sport?  Assemblies?

