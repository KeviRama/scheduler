Content-Type: text/x-zim-wiki
Wiki-Format: zim 0.4
Creation-Date: 2017-02-16T08:14:41+00:00

====== Thursday 16 Feb 2017 ======

Today I aim to finish off the initial installation at Dean Close, at least to the point where selected staff can log in and see things.  I will base their installation off the "demo-system" branch, with a view to re-merging it into the main stream ASAP.

Things it needs:

[*] Google login credentials
[*] New branch - feature/deanclose
[*] Configuring as live system with Nginx
[*] Load skeletal data - cut down version of demo system
[*] Tweak environment variables to call it Dean Close
[*] Why does Google call it "Abingdon School Scheduler"?  Setting on the google apps credentials page.
[*] Cron jobs - especially backups.
[*] Some staff members setting up
[*] An e-mail telling key people about it.

And a check list of things to ask for:
* E-mail account and SMTP server for generated e-mails.
* Access to iSAMS data.

I'll check out the demo-system branch, then create a new branch off it for Dean Close.  All will need folding together again at the earliest possible opportunity.  I can start by merging develop back into demo-system.

Let's create another application instance for Dean Close.  URLs based off:

http://localhost
http://scheduler.deanclose.org.uk
https://scheduler.deanclose.org.uk

Done.

Installed and configured unattended_upgrades on the DC server.

Got the demo system installed and running.  Now, how to get logged in to a new system which doesn't have the demo data?  I think I need to enhance the code to re-try finding staff records.

It's tempting just to add an extra save of the user record.  Matching staff records are checked for each time the user record is saved, but does this lead to a danger of a deadly embrace?  I don't think so - the after_save function can itself do a save, but only after it has created a link.  If it doesn't create a link then it won't save itself and so won't trigger itself again.  If it does create a link and save itself, then it will re-trigger itself but it won't then need to do the check again.  Should be OK.
