Content-Type: text/x-zim-wiki
Wiki-Format: zim 0.4
Creation-Date: 2016-03-30T15:11:30+01:00

====== Wednesday 30 Mar 2016 ======

Long time since I've looked at Scheduler, but today I would like to look at one little oddity.

Sophie Payne has some lessons which appear in Scheduler as Unknown.  Checking in SB they seem to be for a group called "6/7 IGCSE German", but that group doesn't seem to be making it into Scheduler.  Why not?

It's subject code is 128 (German) which is supposedly a wanted subject.  Why doesn't it come in?  Because it has a year ident of -10, and whilst it has a real curriculum ident of 5534, that in turn has a year_ident of -10.  Nor does it have any members.

What happens if we let in all the groups with a year of -10?  Scheduler itself doesn't care, but various bits of the loader code assume that each group will be linked to a year group.

It causes the creation of 1748 extra teaching groups, and thus the addition of 27440 memberships.

Ah - possible snag.  It's pulling in all the Other Half groups as teaching groups.  That will then probably mean that they're in Scheduler's d/b twice.  And indeed, it seems to be creating them afresh each time it's run, resulting in a steadily increasing number of groups.  Not good.

Ah - no.  A single run loads 3 copies of the one group.  Now why's that then?  Because it's in SB's database three times - that's why.  Need to step away from this for a while because there's an iSAMS issue.
