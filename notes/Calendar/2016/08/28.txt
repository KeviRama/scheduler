Content-Type: text/x-zim-wiki
Wiki-Format: zim 0.4
Creation-Date: 2016-08-28T10:21:25+01:00

====== Sunday 28 Aug 2016 ======

Hit an interesting problem setting up Google Oauth authentication for the VPS using scheduler@abingdon.org.uk.  I've succeeded in creating the project in Google's console and set up the relevant keys, however when we try to use them to log in it returns an error.  My application does not cope cleanly with this.

I have a vague recollection that Google's infrastructure takes a while to propagate a new project like this, and so it may simply be a case of needing to wait, but it makes sense for me to improve the application to cope with it more cleanly.  To that end, I propose to copy the new keys to my development system (preserving the old ones of course) and see if I can reproduce the problem here.

I seem to have hit a further problem, in that it's taking a while to add my new URLs to the set it understands.  Currently I'm not getting as far as the error which I encountered on the VPS.

Whilst I'm waiting, what's the authentication library which I'm using?  omniauth-google-oauth2

It looks like my session control needs a failure action.  Perhaps I should log to a file what came back from Google.

Ah - now I can see the error message and it seems you also need to enable the API in the dashboard.  There's a button on the main screen which I have clicked.  I'll wait a few minutes before trying again.  That worked.
