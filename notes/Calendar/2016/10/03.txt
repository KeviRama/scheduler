Content-Type: text/x-zim-wiki
Wiki-Format: zim 0.4
Creation-Date: 2016-10-03T09:35:30+01:00

====== Monday 03 Oct 2016 ======

Today I would like to finish off putting gitolite3 onto Cumulus and push all my sources to it.  I am not going to make any pretence at it being the same repository.  It is a new repository and one will access it with:

git@repository.xronos.uk

What repositories do I have currently on Nimbus, and do they all need to move over?

* markbook
* Wiki (what's that?)
* sample_app
* xronos
* dummy
* scheduler
* markbook4
* isams
* isamsdoc

Surely not all of those.  Bear in mind that everything will still exist on my Nimbus backups, and indeed on PseudoNimbus.  At a first go, I'm inclined to add only markbook and scheduler.  I just need to make sure one can switch over a client machine cleanly.

It occurs to me that, since I'm not attempting to pretend that this is the same repository, it would make sense to migrate over a test project first.  I can use one of those already on Nimbus.

[*] Copy test project to two places on workstation.
[*] Modify one of them to treat new repository as origin.
[*] Push project to new repository.
[*] Make dummy change.
[*] Modify second copy to treat new repository as origin
[*] Pull changes
[*] Make new change
[*] Push
[*] Pull to first copy

Let's see how that goes before I make any further plans.  I need to understand how Gitolite organises keys - the explanation in the manual is not good.

Am I willing to open up ssh on port 22 on Cumulus?  I did have a product (called IIRC failtoban) running on Nimbus to stop repeated attempts.  Given that I don't allow password login via ssh anyway, the only real problem with port 22 is the number of failed login attempts in the log file.

I seem to have something called sample_app already on gitosis.  Create a directory called testgitolite and clone it there.

The command to change the origin within a git project is:

'''
git remote set-url origin git@repository.xronos.uk:<whatever>.git
git push origin master
'''

and then for the second copy, one needs only the first of the two lines.  It seems to work without issue.

