Content-Type: text/x-zim-wiki
Wiki-Format: zim 0.4
Creation-Date: 2015-10-01T08:51:38+01:00

====== Thursday 01 Oct 2015 ======

I've started today by fixing a slightly obscure little problem in the membership evaluation code.  When looked at from the groups point of view (Who is a member?) I have always had a pecking order of importance - highest first

Explicit exclude of the individual
Explicit include of the individual
Exclude by group
Include by group

So an exclude overrides an include, except an individual include overrides a group exclude.  The first two can't both exist, so the rule can be simplified to, "An exclude overrides an include, unless the include is an individual include".

The code for starting with a group and finding the membership has done it this way for a long time, but my new code for starting with an element and finding all the groups of which it is a member over a period of time ignored it.  It always had an exclusion overriding an inclusion.  Added extra code to make ensure an individual include overrides a group exclude.

Seems to work.  Now to finish off the stuff for VJA.  Unfinished items copied from last day:

[*] Check permissions before allowing editing of a group
[*] Allow specification of public groups for selected users
[*] Allow members to be explicitly excluded
[*] Show both immediate and atomic members in the show bit (and the editing?)
[ ] Probably not today - show the chronology of the membership.
[*] Tidy up elemental.rb to have just one version of code initialising an element.
[*] Clicking to delete a group should not actually delete it.  Just mark it as over.
[ ] Code to transfer a selection of groups to VJA (or another nominated user).
[*] List public groups separately from private groups.
[ ] Provide the means to download the membership of a group or a set of groups

Let's do the public stuff first.  I need a permission bit on users specifying whether they can create public groups.  Then a flag on a group indicating whether it is public.  If it is public then all it needs to do is stop propagating its owner id to the element record.  All that public controls is whether or not the item appears in the predictive text boxes.

I am inclined to make the "public" flag on group records default to false.  Most of them will still end up as being public, because their owner id will be nil.  Perhaps I should call it something slightly different - make_public?  publish?
