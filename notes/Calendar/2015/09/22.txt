Content-Type: text/x-zim-wiki
Wiki-Format: zim 0.4
Creation-Date: 2015-09-22T15:00:29+01:00

====== Tuesday 22 Sep 2015 ======

OK - I think I'm going to try to put my search facility onto the staging server.  As ever, record the steps.

[ ] Back up live database
[ ] Restore onto staging server
[ ] export RAILS_ENV=production
[ ] git pull
[ ] touch tmp/restart.txt

Is that it?

Can I just squeeze in a fix for that login issue too?  Done, I hope.

Just noticed something odd.  If I search as a member of the general public, I get events only for the future, but if I search as me logged on then I get stuff from the start of the current era.  Odd?

My search should start at the start of the era.  Why isn't that happening for non logged-in users.  Ah, wrong diagnosis.  It's not the date - it's because I'm looking for events in the (now defunct) Calendar category.  I should instead by looking for events with the Calendar property.

It's actually quite a bit harder to do that search.  I need to find all events involving a particular Property.  I could just do the search as for a logged in user, then filter out the extras.  Is that expensive?  Ended up implementing a new selector function - the correct name escapes me for the moment.  Scope - that's it.
