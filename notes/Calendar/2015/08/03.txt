Content-Type: text/x-zim-wiki
Wiki-Format: zim 0.4
Creation-Date: 2015-08-03T15:34:37+01:00

====== Monday 03 Aug 2015 ======

A brief conversation with DJD has reminded me about the Days controller.  This needs enhancing to cope with the new way of identifying calendar events.  Currently it has three hard-coded categories in it (although these can be over-ridden).  Instead it needs to select by Property, and the default Property would be Calendar.  It would however be nice to be able to specify categories too (e.g. to get all Sports events on the Calendar) or to specify a different selection property.

This probably means a different way of accessing it, since a Property is a real item.  Currently we have:

http://abingdon.scheduler.org.uk/days

but to specify a different property, we probably want:

http://abingdon.scheduler.org.uk/element/27/days

I've used paths like that before in Markbook - must remind myself how to do it.  The old link must work too for reverse compatibility.

Things to do:

[*] Enhance the days controller as above
[ ] Enhance user editing with good formatting and explanations on the fields
[ ] Implement concern editing within users

I could implement "days" as an action in the property controller, but I would really like to direct it to its own controller.

Seem to have managed it.  You can now access the same days controller using either of those two links above.  I'm going for maximum versatility.  If you don't specify an element then I will default to the Calendar element - a Property.

The default categories will now be "nil" and one will get events in all categories.  We will however insist on a real element, to avoid getting ridiculously large output.

Ah - extra problem.  The days controller provided a bit of hidden functionality in that events would appear in the order in which the categories were specified.  This was:

Week letter
Key date (external)
Calendar

This would seem an ideal opportunity to use the pecking order in the event categories, which AFAIK currently does nothing.  I would need to reinstate the display of it in the eventcategory index.  Done that.
