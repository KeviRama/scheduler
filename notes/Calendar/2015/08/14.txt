Content-Type: text/x-zim-wiki
Wiki-Format: zim 0.4
Creation-Date: 2015-08-14T08:58:28+01:00

====== Friday 14 Aug 2015 ======

Today I propose to start by importing last night's SB data into my staging server.  I will need to remember to retain the modified Duties and Extra Groups files (which otherwise get overwritten as I suck data from Mach2).  I won't re-import the database - I'm looking to check that ongoing maintenance works.

Once that's done I will move over to Markbook to think about end-of-year there.

[ ] Copy Duties.yml and extra*.yml to a "save" directory
[ ] Run ./fetch
[ ] export RAILS_ENV=production
[ ] Copy the contents of the save directory back again
[ ] time bundle exec lib/import/importsb.rb >output.txt

And we'll see how it goes.  3m 57s.

Some more pupils added to tutor groups.  Some teaching groups renamed.  Some pupils added to teaching groups.  Some more timetable events.  Seems to have run smoothly.

On then to Markbook.  I should be able to use the files from Scheduler.  Want a fresh copy of the live Markbook database though.

OTL has just flagged an interesting problem - he couldn't view events for people properly, even though it worked fine for everyone else who's tried so far.  The difference seems to be that he's not an editor, which suggests a permissions problem although I'm not sure quite where.  OTOH, it could be to do with the page being rendered differently for editors.

When he first adds a new thing to watch he can see its events, but if he reloads the page then he can't.  I've reproduced it on scheduler.sinodun.org.uk by setting jhwinters to be not an editor.  I'll see if I can do the same on Midnight.  Yes, exactly the symptoms which he reported.  Now why?  The front end just doesn't seem to be asking for them.  Yes, I simply wasn't initialising my dynamic elements if the user wasn't an editor.  Try again.  Seems OK now.  Deploy that to the staging server.  OTL reports that it now works - good.
